(function(t){function e(e){for(var i,s,o=e[0],c=e[1],l=e[2],h=0,u=[];h<o.length;h++)s=o[h],a[s]&&u.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);f&&f(e);while(u.length)u.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],i=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(i=!1)}i&&(n.splice(e--,1),t=s(s.s=r[0]))}return t}var i={},a={app:0},n=[];function s(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=i,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var f=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var i=r("64a9"),a=r.n(i);a.a},1742:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("097d");var i=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("h1",[t._v("The Seasonality of Box Office Hits")]),t._m(0),r("div",{staticClass:"area-container"},[t._m(1),r("AreaChart",t._b({},"AreaChart",{movies:t.movies,filtered:t.filtered,holidays:t.holidays},!1))],1),t._l(t.histograms,function(e){var i=e.id,a=e.label,n=e.format;return r("div",{staticClass:"histograms"},[r("Histogram",t._b({},"Histogram",{movies:t.movies,filtered:t.filtered,id:i,format:n,updateFilters:t.updateFilters},!1)),r("div",[r("strong",[t._v(t._s(a))])])],1)})],2)},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticClass:"description"},[t._v("\nIn the last decade, most block buster hits have happened around or during the summer and winter holidays.\n"),r("strong",[t._v("Brush")]),t._v(" the histograms to filter the movies by metascore and/or box office figures, and "),r("strong",[t._v("hover")]),t._v(" the movies to see more details.\n    ")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"area-title"},[r("strong",[t._v("$ over/under median box office")])])}],s=(r("f751"),r("2ef0")),o=r.n(s),c=r("5698"),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"areachart"},[r("svg",{attrs:{width:t.width,height:t.height}},[r("g",{staticClass:"holidays"},t._l(t.texts,function(e){return r("g",{attrs:{transform:"translate("+e.x+", 36)"}},[r("line",{attrs:{x1:-e.width/2,x2:e.width/2,stroke:e.fill}}),r("text",{attrs:{dy:"-.35em","text-anchor":"middle",fill:e.fill}},[t._v(t._s(e.text))])])})),r("transition-group",{attrs:{tag:"g",css:!1},on:{enter:t.enter,leave:t.leave}},t._l(t.arcs,function(e){return r("path",{key:e.id,staticClass:"arc",attrs:{d:e.path,fill:e.fill,stroke:"#fff"},on:{mouseenter:function(){return t.hovered=e},mouseleave:function(){return t.hovered=null}}})})),r("g",{ref:"xAxis",attrs:{transform:"translate(0, "+t.y0+")"}}),r("g",{ref:"yAxis",attrs:{transform:"translate("+t.margin.left+", 0)"}})],1),t.hovered?r("div",{staticClass:"hovered",style:{top:t.hovered.y+20+"px",left:t.hovered.x+"px"}},[r("strong",[t._v("title")]),t._v(" "+t._s(t.hovered.data.title)),r("br"),r("strong",[t._v("date")]),t._v(" "+t._s(t.formatDate(t.hovered.data.date))),r("br"),r("strong",[t._v("metascore")]),t._v(" "+t._s(t.hovered.data.score)),r("br"),r("strong",[t._v("box office")]),t._v(" "+t._s(t.formatBox(t.hovered.data.boxOffice))),r("br")]):t._e()])},f=[],h=r("3835"),u=r("cffa"),d=1e3,v=300,m={top:0,right:0,bottom:20,left:60},g={name:"areachart",props:["movies","filtered","holidays"],data:function(){return{width:d,height:v,margin:m,arcs:[],texts:[],medianBox:0,y0:0,hovered:null}},watch:{movies:function(){this.calculateScales(),this.calculateHolidays(),this.renderAxes()},filtered:function(){this.calculateData()}},methods:{calculateScales:function(){var t=this;if(this.movies.length){this.medianBox=c["l"](this.movies,function(t){return t.boxOffice});var e=c["g"](this.movies,function(t){return t.score});this.colorScale=c["n"](c["j"]).domain(e).nice();var r=c["g"](this.movies,function(t){return t.date}),i=Object(h["a"])(r,2),a=i[0],n=i[1];this.xScale=c["o"]().domain([c["r"].offset(a,-2),c["r"].offset(n,2)]).range([m.left,d-m.right]);var s=c["g"](this.movies,function(e){return e.boxOffice-t.medianBox});this.yScale=c["m"]().domain(s).range([v-m.bottom,m.top]),this.y0=this.yScale(0),this.areaGen=c["a"]().curve(c["e"]).y0(this.y0)}},renderAxes:function(){var t=c["b"]().scale(this.xScale).tickFormat(this.format),e=c["c"]().scale(this.yScale).tickSizeOuter(0).tickFormat(function(t){return"".concat(c["h"]("$")(parseInt(t/1e6)),"M")});c["p"](this.$refs.xAxis).call(t),c["p"](this.$refs.yAxis).call(e).select(".domain").remove()},calculateData:function(){var t=this;this.filtered.length&&(this.arcs=o.a.chain(this.filtered).sortBy(function(e){return-Math.abs(e.boxOffice-t.medianBox)}).map(function(e){var r=t.xScale(e.date),i=t.yScale(e.boxOffice-t.medianBox);return{id:e.id,path:t.areaGen([[t.xScale(c["r"].offset(e.date,-2)),t.y0],[r,i],[t.xScale(c["r"].offset(e.date,2)),t.y0]]),fill:t.colorScale(e.score),data:e,x:r,y:i}}).value())},calculateHolidays:function(){var t=this;this.texts=o.a.map(this.holidays,function(e,r){var i=Object(h["a"])(e,2),a=i[0],n=i[1],s=t.xScale(a),o=t.xScale(n);return{x:(s+o)/2,width:o-s,fill:r%2===0?"rgb(253, 174, 97)":"rgb(116, 173, 209)",text:r%2===0?"s":"w"}})},enter:function(t,e){u["a"].fromTo(t,.25,{scaleY:0,svgOrigin:"0 ".concat(this.y0)},{scaleY:1,onComplete:e})},leave:function(t,e){u["a"].fromTo(t,.25,{scaleY:1},{scaleY:0,svgOrigin:"0 ".concat(this.y0),onComplete:e})},formatDate:function(t){return c["q"]("%b %d, %Y")(t)},formatBox:function(t){return c["h"]("$,.0f")(t)}}},p=g,b=(r("fd09"),r("2877")),x=Object(b["a"])(p,l,f,!1,null,null,null);x.options.__file="AreaChart.vue";var y=x.exports,_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"histogram",attrs:{width:t.width,height:t.height}},[r("g",{staticClass:"bars"},t._l(t.bars,function(t){return r("rect",{key:t.id,attrs:{x:t.x,width:t.width,y:t.y,height:t.height,fill:t.fill,stroke:t.fill}})})),r("g",{ref:"xAxis",attrs:{transform:"translate(0, "+(t.height-t.margin.bottom)+")"}}),r("g",{ref:"brush"})])},S=[],w=r("ade3"),O=500,j=120,C={top:20,right:20,bottom:20,left:20},k={name:"histogram",props:["movies","filtered","id","format","updateFilters"],data:function(){return{width:O,height:j,margin:C,bars:[]}},mounted:function(){this.brush=c["d"]().extent([[C.left,C.top],[O-C.right,j-C.bottom]]).on("brush",this.brushEnd).on("end",this.brushEnd),c["p"](this.$refs.brush).call(this.brush)},watch:{movies:function(){this.calculateScales(),this.renderAxes()},filtered:function(){this.calculateData()}},methods:{calculateScales:function(){var t=this;if(this.movies.length){var e=c["g"](this.movies,function(t){return t.score});this.colorScale=c["n"](c["j"]).domain(e).nice();var r=c["g"](this.movies,function(e){return e[t.id]});this.xScale=c["m"]().domain(r).nice().range([C.left,O-C.right]),this.histogram=c["i"]().domain(this.xScale.domain()).thresholds(this.xScale.ticks(50)).value(function(e){return e[t.id]});var i=this.histogram(this.movies),a=c["k"](i,function(t){return t.length});this.yScale=c["m"]().domain([0,a]).range([j-C.bottom,C.top])}},renderAxes:function(){var t=c["b"]().scale(this.xScale).tickFormat(this.format);c["p"](this.$refs.xAxis).call(t)},calculateData:function(){var t=this;if(this.filtered.length){var e=this.histogram(this.filtered);this.bars=e.map(function(e,r){var i=e.x0,a=e.x1,n=t.xScale(i),s=t.bars[r]?t.bars[r].toY:t.yScale(0),o=t.yScale(e.length),l=t.colorScale(c["l"](e,function(t){return t.score})||0);return{id:r,x:n,width:t.xScale(a)-n,y:s,toY:o,height:j-C.bottom-s,toHeight:j-C.bottom-o,fill:l}});u["b"].staggerFromTo(this.bars,.25,{cycle:{y:function(e){return t.bars[e].y},height:function(e){return t.bars[e].height}}},{cycle:{y:function(e){return t.bars[e].toY},height:function(e){return t.bars[e].toHeight}}})}},brushEnd:function(){var t=null;if(c["f"].selection){var e=Object(h["a"])(c["f"].selection,2),r=e[0],i=e[1];t=[this.xScale.invert(r),this.xScale.invert(i)]}this.updateFilters(Object(w["a"])({},this.id,t))}}},A=k,$=(r("7659"),Object(b["a"])(A,_,S,!1,null,"4d09ef5e",null));$.options.__file="Histogram.vue";var D=$.exports,B=2008,F=[];o.a.times(10,function(t){F.push([new Date("6/1/".concat(B+t)),new Date("8/30/".concat(B+t))]),F.push([new Date("11/1/".concat(B+t)),new Date("12/31/".concat(B+t))])});var H={name:"app",components:{Histogram:D,AreaChart:y},data:function(){return{histograms:[{id:"score",label:"metascores"},{id:"boxOffice",label:"box office figures",format:function(t){return"$".concat(parseInt(t/1e6),"M")}}],movies:[],filters:{},filtered:[],holidays:F}},mounted:function(){var t=this;fetch("./movies.json").then(function(t){return t.json()}).then(function(e){t.movies=o.a.chain(e).map(function(t,e){return Object.assign(t,{id:e,date:new Date(t.date)})}).filter(function(t){return t.boxOffice&&t.year>=B}).value(),t.filtered=t.movies})},methods:{updateFilters:function(t){var e=this;this.filters=Object.assign(this.filters,t),this.filtered=o.a.filter(this.movies,function(t){return o.a.every(e.filters,function(e,r){return!e||e[0]<t[r]&&t[r]<e[1]})})}}},E=H,Y=(r("034f"),Object(b["a"])(E,a,n,!1,null,null,null));Y.options.__file="App.vue";var M=Y.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(M)}}).$mount("#app")},"64a9":function(t,e,r){},7659:function(t,e,r){"use strict";var i=r("7f70"),a=r.n(i);a.a},"7f70":function(t,e,r){},fd09:function(t,e,r){"use strict";var i=r("1742"),a=r.n(i);a.a}});
//# sourceMappingURL=app.9890a629.js.map